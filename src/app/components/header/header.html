<nav class="fixed top-0 w-full z-50 bg-black/20 backdrop-blur-lg border-b border-white/10">
    <div class="max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-16">
            <div class="flex items-center gap-2.5">
                <img
                    src="https://storage.googleapis.com/hostinger-horizons-assets-prod/7c9be4d7-e245-4b80-b131-cb1f891725e5/10526ac86c95a8792ceaeaa0212d4b3d.png"
                    alt="kogn.us icon"
                    class="text-5xl h-[1em]"
                />
                <span class="font-['Outfit'] font-bold text-[1.2em]">
                    <span class="text-white">kogn</span>
                    <span class="text-pink-400">.us</span>
                </span>
            </div>
            @if (isLogged) {
            <div class="hidden lg:flex items-center space-x-1">
                <button routerLink="/" routerLinkActive="bg-purple-500/20 text-purple-300 border border-purple-500/30" [routerLinkActiveOptions]="{exact: true}" 
                    class="px-3 py-2 rounded-lg transition-all text-sm font-medium text-gray-300 border-transparent hover:text-white hover:bg-white/5">
                    Home
                </button>
                <button routerLink="/generate-content" routerLinkActive="bg-purple-500/20 text-purple-300 border border-purple-500/30" 
                    class="px-3 py-2 rounded-lg transition-all text-sm font-medium text-gray-300 border-transparent hover:text-white hover:bg-white/5">
                    Gerar conteúdo
                </button>
            </div>
            <div class="hidden lg:flex items-center gap-4">
                <div class="inline-flex cursor-pointer items-center justify-center text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground relative h-10 w-10 rounded-full p-0"
                    (click)="toggle($event)" type="button">
                    <div class="w-10 h-10 rounded-full flex items-center justify-center" style="background-color: rgb(139, 92, 246);">
                        <i class="pi pi-sparkles text-white"></i>
                    </div>
                </div>
            </div>
            }@else{
            <div class="flex gap-4">
                <button (click)="visibleLoginModal = true" 
                    class="items-center justify-center rounded-md text-sm font-medium ring-offset-background h-10 px-4 py-2 text-gray-300 hover:text-white hover:bg-white/5">
                        Entrar
                </button>
                <button routerLink="/register" 
                    class="items-center justify-center rounded-md text-sm font-medium ring-offset-background bg-primary hover:bg-primary/90 h-10 px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white">
                    Criar Conta
                </button>
            </div>
            }
        </div>
    </div>
</nav>

<p-toast key="toastr" [showTransitionOptions]="'250ms'" [showTransformOptions]="'translateX(100%)'" [hideTransitionOptions]="'150ms'" [hideTransformOptions]="'translateX(100%)'" />
<p-dialog maskStyleClass="backdrop-blur-sm" [(visible)]="visibleLoginModal" (onHide)="visibleLoginModal = false" styleClass="!border-0 !bg-transparent">
    <ng-template #headless>
        <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
            <div
                class="flex flex-col px-8 py-8 gap-8 rounded-2xl"
                style="background: linear-gradient(135deg, #0f172a 0%, #581c87 50%, #1e3a8a 100%);"
            >
                <div class="inline-flex flex-col gap-2">
                    <label for="email" class="text-primary-50 font-semibold">Email</label>
                    <input pInputText formControlName="email" 
                        id="email"
                        class="!bg-white/20 !border-0 !p-3 !text-primary-50 w-80"
                    />
                    @if (isInvalid('email')) {
                        <p-message severity="error" size="small" variant="simple">Email é obrigatório.</p-message>
                    }
                </div>
                <div class="inline-flex flex-col gap-2">
                    <label for="password" class="text-primary-50 font-semibold">Senha</label>
                    <input pInputText formControlName="senha"
                        id="password"
                        class="!bg-white/20 !border-0 !p-3 !text-primary-50 w-80"
                        type="password"
                    />
                    <button (click)="forgotPassword()" class="text-right text-sm hover:underline">
                        <span>Esqueceu a senha</span>
                    </button>
                    @if (isInvalid('senha')) {
                        <p-message severity="error" size="small" variant="simple">Senha é obrigatório.</p-message>
                    }
                </div>
                <div class="flex items-center gap-4">
                    <p-button
                        label="Cancelar"
                        (click)="visibleLoginModal = false"
                        [text]="true"
                        styleClass="!p-3 w-full !text-primary-50 !border !border-white/30 hover:!bg-white/10"
                        class="w-full"
                    />
                    <p-button
                        label="Entrar"
                        [disabled]="loginForm.invalid"
                        (click)="login()"
                        [text]="true"
                        styleClass="!p-3 w-full !text-primary-50 !border !border-white/30 hover:!bg-white/10"
                        class="w-full"
                    />
                </div>
            </div>
        </form>
    </ng-template>
</p-dialog>

<p-popover #op styleClass="min-w-[8rem] w-56 !bg-slate-950 !text-slate-50 p-1 !border !border-slate-800 !rounded-md">
    <div class="flex flex-col gap-4">
        <div class="text-xs">
            <div class="flex flex-col gap-2">
            <b>{{ me.nome }}</b>
            <b>{{ me.email }}</b>
            </div>
            <p-divider class="!my-2" />
            <ul class="list-none p-0 m-0 flex flex-col">
                @for ( route of routerMenu; track $index){
                <li class="flex items-center gap-2 px-1 py-2 hover:bg-slate-800 hover:text-slate-50 cursor-pointer rounded-border" 
                    [routerLink]="route.routerLink">
                    <i [class]="route.icon" style="width: 32px"></i>
                    <div>
                        <span class="font-normal text-white">{{ route.label }}</span>
                    </div>
                </li>
                }
            </ul>
            <p-divider class="!my-2" />
            <div class="flex items-center gap-2 px-4 py-2 hover:bg-slate-800 hover:text-slate-50 cursor-pointer rounded-border"
                (click)="logout()">
                <i class="pi pi-sign-out" style="width: 23px"></i>
                
                <div>
                    <span class="font-normal text-white">Sair</span>
                </div>
            </div>
        </div>
    </div>
</p-popover>